{
    "positions": [
        {
            "name": "player_start",
            "rect": {
                "x": 288.097,
                "y": 114.703,
                "width": 224.631,
                "height": 203.665
            }
        },
        {
            "name": "orange_01",
            "rect": {
                "x": 198.245,
                "y": 944.339,
                "width": 83.8622,
                "height": 74.877
            }
        },
        {
            "name": "orange_03",
            "rect": {
                "x": 876.131,
                "y": 2066.49,
                "width": 83.8622,
                "height": 75.8755
            }
        },
        {
            "name": "orange_02",
            "rect": {
                "x": 900.092,
                "y": 1340.69,
                "width": 70.8835,
                "height": 75.8754
            }
        },
        {
            "name": "boss_01",
            "rect": {
                "x": 667.474,
                "y": 1903.76,
                "width": 178.706,
                "height": 157.741
            }
        },
        {
            "name": "red_01_trigger",
            "rect": {
                "x": 2030.24,
                "y": 2130.39,
                "width": 199.672,
                "height": 135.777
            }
        },
        {
            "name": "red_01",
            "rect": {
                "x": 2052.2,
                "y": 2012.58,
                "width": 174.713,
                "height": 103.829
            }
        },
        {
            "name": "orange_04",
            "rect": {
                "x": 3364.04,
                "y": 1736.03,
                "width": 104.828,
                "height": 88.8539
            }
        },
        {
            "name": "orange_05",
            "rect": {
                "x": 3723.45,
                "y": 823.532,
                "width": 68.8867,
                "height": 70.8835
            }
        },
        {
            "name": "orange_06",
            "rect": {
                "x": 3414.96,
                "y": 251.472,
                "width": 73.8789,
                "height": 72.8803
            }
        },
        {
            "name": "orange_07",
            "rect": {
                "x": 2038.22,
                "y": 358.297,
                "width": 72.8802,
                "height": 64.8933
            }
        },
        {
            "name": "orange_08",
            "rect": {
                "x": 1468.16,
                "y": 863.467,
                "width": 63.8951,
                "height": 66.8901
            }
        },
        {
            "name": "boss_03",
            "rect": {
                "x": 1519.07,
                "y": 969.293,
                "width": 96.8408,
                "height": 101.833
            }
        },
        {
            "name": "boss_02",
            "rect": {
                "x": 3515.79,
                "y": 283.42,
                "width": 98.8374,
                "height": 102.831
            }
        },
        {
            "name": "boss_1_trigger",
            "rect": {
                "x": 100.41,
                "y": 1436.53,
                "width": 1626.33,
                "height": 255.58
            }
        },
        {
            "name": "red_03",
            "rect": {
                "x": 2414.61,
                "y": 1086.1,
                "width": 77.8721,
                "height": 67.8884
            }
        },
        {
            "name": "red_02",
            "rect": {
                "x": 3109.46,
                "y": 258.463,
                "width": 100.834,
                "height": 83.8622
            }
        },
        {
            "name": "red_02_trigger",
            "rect": {
                "x": 3119.44,
                "y": 263.454,
                "width": 233.616,
                "height": 149.754
            }
        },
        {
            "name": "red_03_trigger",
            "rect": {
                "x": 2218.92,
                "y": 1106.07,
                "width": 263.567,
                "height": 150.752
            }
        }
    ],
    "events": [
        {
            "name": "story_01",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "map_init"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "story_action",
                    "story_data": [
                        {
                            "left_or_right": true,
                            "line": "猫女：财宝不稀罕，这些绿脸怪就够我玩儿一天的了～",
                            "speaker": "kyle"
                        },
                        {
                            "left_or_right": true,
                            "line": "小鹿：找不到财宝，就不能知道主人的下落了...",
                            "speaker": "enchantress"
                        },
                        {
                            "left_or_right": true,
                            "line": "德古拉：前面有矿坑，一定是宝藏的所在地！",
                            "speaker": "dracula"
                        }
                    ],
                    "name": "story_01"
                }
            ]
        },
        {
            "name": "default_monster",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "story_change",
                    "story_name": "story_01",
                    "story_state": "story_end"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "wild_wolf",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_01",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_02",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_03",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "bomb_goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_03",
                    "unit_count": 1,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_04",
                    "unit_count": 3,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_05",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_06",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_07",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_08",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "bomb_goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_08",
                    "unit_count": 1,
                    "unit_level": 3,
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "story_02",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_stay",
                    "source_type": "tag_source",
                    "source_value": "player",
                    "position_name": "boss_1_trigger",
                    "trigger_count": 1,
                    "duration": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "event_change",
                    "event_name": "boss_01_dead",
                    "event_state": "event_enable"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "event_change",
                    "event_name": "boss_02_dead",
                    "event_state": "event_enable"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "event_change",
                    "event_name": "boss_03_dead",
                    "event_state": "event_enable"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "event_change",
                    "event_name": "trigger_red_01",
                    "event_state": "event_enable"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "event_change",
                    "event_name": "trigger_red_02",
                    "event_state": "event_enable"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "event_change",
                    "event_name": "trigger_red_03",
                    "event_state": "event_enable"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin_shredder",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": true,
                    "tag_name": "boss_01",
                    "position_name": "boss_01",
                    "unit_count": 1,
                    "is_boss": true,
                    "unit_level": 2,
                    "popup_type": "normal",
                    "item_get_or_lose": true,
                    "item_name": "rail_repair",
                    "item_resource": "spanner.png"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin_shredder",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": true,
                    "tag_name": "boss_02",
                    "position_name": "boss_02",
                    "unit_count": 1,
                    "is_boss": true,
                    "unit_level": 2,
                    "popup_type": "normal",
                    "skill_1_level": 1,
                    "item_get_or_lose": true,
                    "item_name": "rail_repair",
                    "item_resource": "spanner.png"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin_shredder",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": true,
                    "tag_name": "boss_03",
                    "position_name": "boss_03",
                    "unit_count": 1,
                    "is_boss": true,
                    "unit_level": 3,
                    "popup_type": "normal",
                    "skill_1_level": 1,
                    "item_get_or_lose": true,
                    "item_name": "rail_repair",
                    "item_resource": "spanner.png"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "story_action",
                    "story_data": [
                        {
                            "left_or_right": false,
                            "line": "???：现在淘金的越来越不入眼，就你们这些小胳膊小腿也想来插一脚？",
                            "speaker": "goblin_shredder"
                        },
                        {
                            "left_or_right": true,
                            "line": "猫女：这只很调皮，快收了它！",
                            "speaker": "kyle"
                        },
                        {
                            "left_or_right": true,
                            "line": "德古拉：怎么，要当宠物养？",
                            "speaker": "dracula"
                        }
                    ],
                    "name": "story_02"
                }
            ]
        },
        {
            "name": "boss_01_dead",
            "enabled": false,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss_01",
                    "unit_state": "unit_alive",
                    "trigger_count": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "story_action",
                    "story_data": [
                        {
                            "left_or_right": false,
                            "line": "???：啊!!!!",
                            "speaker": "goblin_shredder"
                        },
                        {
                            "left_or_right": true,
                            "line": "猫女：诶，不经玩...",
                            "speaker": "kyle"
                        },
                        {
                            "left_or_right": true,
                            "line": "小鹿：这些是...修理工具？",
                            "speaker": "enchantress"
                        },
                        {
                            "left_or_right": true,
                            "line": "德古拉：我懂了！修好铁轨，就可以通过矿车进入矿坑~",
                            "speaker": "dracula"
                        },
                        {
                            "left_or_right": true,
                            "line": "猫女：....坑里还有绿脸怪吗？",
                            "speaker": "enchantress"
                        }
                    ],
                    "name": "story_03"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "leader",
                    "show_hp": true,
                    "unit_level": 1,
                    "popup_type": "normal",
                    "item_get_or_lose": true,
                    "item_name": "rail_repair",
                    "item_resource": "spanner.png"
                }
            ]
        },
        {
            "name": "boss_02_dead",
            "enabled": false,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss_02",
                    "unit_state": "unit_alive",
                    "trigger_count": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "leader",
                    "show_hp": true,
                    "unit_level": 1,
                    "popup_type": "normal",
                    "item_get_or_lose": true,
                    "item_name": "rail_repair",
                    "item_resource": "spanner.png"
                }
            ]
        },
        {
            "name": "boss_03_dead",
            "enabled": false,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss_03",
                    "unit_state": "unit_alive",
                    "trigger_count": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "leader",
                    "show_hp": true,
                    "unit_level": 1,
                    "popup_type": "normal",
                    "item_get_or_lose": true,
                    "item_name": "rail_repair",
                    "item_resource": "spanner.png"
                }
            ]
        },
        {
            "name": "trigger_red_01",
            "enabled": false,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_stay",
                    "source_type": "tag_source",
                    "source_value": "leader",
                    "position_name": "red_01_trigger",
                    "trigger_count": 1,
                    "duration": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_01",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "bomb_goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_01",
                    "unit_count": 1,
                    "unit_level": 2,
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "trigger_red_02",
            "enabled": false,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_stay",
                    "source_type": "tag_source",
                    "source_value": "leader",
                    "position_name": "red_02_trigger",
                    "trigger_count": 1,
                    "duration": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "bomb_goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_02",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_02",
                    "unit_count": 2,
                    "unit_level": 2,
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "trigger_red_03",
            "enabled": false,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_stay",
                    "source_type": "tag_source",
                    "source_value": "leader",
                    "position_name": "red_03_trigger",
                    "trigger_count": 1,
                    "duration": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_03",
                    "unit_count": 2,
                    "unit_level": 3,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "bomb_goblin",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_03",
                    "unit_count": 2,
                    "unit_level": 3,
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "lose_trigger",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "player",
                    "unit_state": "unit_alive",
                    "trigger_count": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "task_change",
                    "task_name": "main_win",
                    "task_state": "task_failed"
                }
            ]
        },
        {
            "name": "on_red_01_repaired",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "vision_change",
                    "source_type": "name_source",
                    "source_value": "rail_01",
                    "vision_state": "enabled"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "task_change",
                    "task_name": "main_win",
                    "task_state": "task_progress",
                    "progress": 33
                }
            ]
        },
        {
            "name": "on_red_02_repaired",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "vision_change",
                    "source_type": "name_source",
                    "source_value": "rail_02",
                    "vision_state": "enabled"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "task_change",
                    "task_name": "main_win",
                    "task_state": "task_progress",
                    "progress": 33
                }
            ]
        },
        {
            "name": "on_rail_03_repaired",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "vision_change",
                    "source_type": "name_source",
                    "source_value": "rail_03",
                    "vision_state": "enabled"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "task_change",
                    "task_name": "main_win",
                    "task_state": "task_progress",
                    "progress": 34
                }
            ]
        }
    ],
    "units": [
        "bomb_goblin",
        "goblin",
        "goblin_shredder",
        "wild_wolf"
    ],
    "tasks": [
        {
            "type": "primary_win",
            "name": "main_win",
            "desc": "repair three rails",
            "title": "repair_rails"
        }
    ]
}