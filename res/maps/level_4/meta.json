{
    "positions": [
        {
            "name": "player_start",
            "rect": {
                "x": 5434.05,
                "y": 2138.38,
                "width": 116.808,
                "height": 118.805
            }
        },
        {
            "name": "orange_01",
            "rect": {
                "x": 4998.36,
                "y": 3042.89,
                "width": 81.8657,
                "height": 73.8787
            }
        },
        {
            "name": "orange_02",
            "rect": {
                "x": 4576.06,
                "y": 2346.04,
                "width": 105.826,
                "height": 103.829
            }
        },
        {
            "name": "red_01",
            "rect": {
                "x": 3922.13,
                "y": 2511.76,
                "width": 73.8784,
                "height": 75.8755
            }
        },
        {
            "name": "red_02",
            "rect": {
                "x": 2622.27,
                "y": 2436.89,
                "width": 85.8589,
                "height": 91.8489
            }
        },
        {
            "name": "red_03",
            "rect": {
                "x": 1983.32,
                "y": 2126.4,
                "width": 99.8359,
                "height": 95.8425
            }
        },
        {
            "name": "yellow_01",
            "rect": {
                "x": 1195.61,
                "y": 2581.65,
                "width": 90.8508,
                "height": 87.8555
            }
        },
        {
            "name": "blue_01",
            "rect": {
                "x": 1920.42,
                "y": 1134.03,
                "width": 108.821,
                "height": 115.81
            }
        },
        {
            "name": "yellow_03",
            "rect": {
                "x": 731.374,
                "y": 1196.92,
                "width": 80.8672,
                "height": 89.8524
            }
        },
        {
            "name": "blue_02",
            "rect": {
                "x": 526.71,
                "y": 1771.98,
                "width": 92.8473,
                "height": 99.8358
            }
        },
        {
            "name": "blue_03",
            "rect": {
                "x": 2666.19,
                "y": 1251.83,
                "width": 76.8738,
                "height": 80.8671
            }
        },
        {
            "name": "boss",
            "rect": {
                "x": 4428.3,
                "y": 1081.11,
                "width": 107.823,
                "height": 109.82
            }
        },
        {
            "name": "boss_guard_01",
            "rect": {
                "x": 4185.7,
                "y": 1323.71,
                "width": 92.8472,
                "height": 85.859
            }
        },
        {
            "name": "boss_guard_02",
            "rect": {
                "x": 4833.63,
                "y": 1115.06,
                "width": 93.8457,
                "height": 84.8606
            }
        },
        {
            "name": "boss_guard_03",
            "rect": {
                "x": 4794.7,
                "y": 745.665,
                "width": 96.8408,
                "height": 89.8523
            }
        },
        {
            "name": "boss_guard_04",
            "rect": {
                "x": 4090.85,
                "y": 862.473,
                "width": 97.8394,
                "height": 91.849
            }
        },
        {
            "name": "trigger_boss",
            "rect": {
                "x": 3433.93,
                "y": 926.368,
                "width": 213.649,
                "height": 785.709
            }
        },
        {
            "name": "orange_03",
            "rect": {
                "x": 2421.6,
                "y": 2145.37,
                "width": 71.8818,
                "height": 72.8801
            }
        },
        {
            "name": "orange_04",
            "rect": {
                "x": 765.319,
                "y": 2496.79,
                "width": 77.872,
                "height": 77.8721
            }
        },
        {
            "name": "orange_05",
            "rect": {
                "x": 284.109,
                "y": 1456.5,
                "width": 77.872,
                "height": 77.8721
            }
        },
        {
            "name": "orange_06",
            "rect": {
                "x": 1241.54,
                "y": 933.357,
                "width": 84.8606,
                "height": 88.854
            }
        },
        {
            "name": "orange_07",
            "rect": {
                "x": 3030.6,
                "y": 164.62,
                "width": 101.833,
                "height": 93.8458
            }
        },
        {
            "name": "orange_08",
            "rect": {
                "x": 2924.77,
                "y": 1365.65,
                "width": 77.8721,
                "height": 76.8735
            }
        },
        {
            "name": "orange_09",
            "rect": {
                "x": 5352.78,
                "y": 706.729,
                "width": 83.8623,
                "height": 89.8524
            }
        },
        {
            "name": "yellow_02",
            "rect": {
                "x": 1560.25,
                "y": 1336.3,
                "width": 95.8425,
                "height": 100.834
            }
        }
    ],
    "events": [
        {
            "name": "lose_trigger",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "player",
                    "unit_state": "unit_alive",
                    "trigger_count": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "task_change",
                    "task_name": "main_win",
                    "task_state": "task_failed"
                }
            ]
        },
        {
            "name": "story_01",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "map_init"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "story_action",
                    "story_data": [
                        {
                            "left_or_right": true,
                            "line": "猫女：这里感觉阴森森的！",
                            "speaker": "kyle"
                        },
                        {
                            "left_or_right": true,
                            "line": "德古拉：你也有害怕的时候！",
                            "speaker": "dracula"
                        },
                        {
                            "left_or_right": true,
                            "line": "猫女：我才不怕！",
                            "speaker": "kyle"
                        },
                        {
                            "left_or_right": false,
                            "line": "骷髅王：kakaka...kekeke...",
                            "speaker": "skeleton_king"
                        },
                        {
                            "left_or_right": true,
                            "line": "猫女：啊啊啊啊啊啊！",
                            "speaker": "kyle"
                        },
                        {
                            "left_or_right": true,
                            "line": "德古拉....",
                            "speaker": "dracula"
                        },
                        {
                            "left_or_right": true,
                            "line": "小鹿：咦？那边的水晶好像在发光！",
                            "speaker": "enchantress"
                        },
                        {
                            "left_or_right": true,
                            "line": "德古拉：也许跟前面的门有关！",
                            "speaker": "dracula"
                        }
                    ],
                    "name": "story_01"
                }
            ]
        },
        {
            "name": "orange_monster",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "story_change",
                    "story_name": "story_01",
                    "story_state": "story_end"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_01",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_02",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_03",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_04",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_05",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_06",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_08",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_09",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "white_ghost",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "orange_07",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "buff_monster",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "story_change",
                    "story_name": "story_01",
                    "story_state": "story_end"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_01",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_02",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "dead_archer",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "red_03",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "dead_archer",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "yellow_01",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "yellow_01",
                    "unit_count": 1,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "yellow_02",
                    "unit_count": 3,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "dead_archer",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "yellow_03",
                    "unit_count": 3,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "dead_archer",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "blue_01",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "blue_02",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "story_02",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_stay",
                    "source_type": "tag_source",
                    "source_value": "player",
                    "position_name": "trigger_boss",
                    "trigger_count": 1,
                    "duration": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "story_action",
                    "story_data": [
                        {
                            "left_or_right": false,
                            "line": "骷髅王：凡人！竟敢来盗我的宝石！拿命来！",
                            "speaker": "skeleton_king"
                        },
                        {
                            "left_or_right": true,
                            "line": "猫女：......",
                            "speaker": "kyle"
                        },
                        {
                            "left_or_right": true,
                            "line": "德古拉：听不到你吐槽，总觉得不太舒服...",
                            "speaker": "dracula"
                        },
                        {
                            "left_or_right": true,
                            "line": "小鹿：小心！注意骷髅王身上的状态！",
                            "speaker": "enchantress"
                        }
                    ],
                    "name": "story_02"
                }
            ]
        },
        {
            "name": "trigger_boss",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "story_change",
                    "story_name": "story_02",
                    "story_state": "story_end"
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "event_change",
                    "event_name": "win_trigger",
                    "event_state": "event_enable"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_king",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": true,
                    "tag_name": "boss",
                    "position_name": "boss",
                    "unit_count": 1,
                    "is_boss": true,
                    "custom_change": "hp:8000",
                    "unit_level": 5,
                    "popup_type": "normal",
                    "skill_1_level": 2
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "boss_guard_03",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "boss_guard_02",
                    "unit_count": 1,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "boss_guard_01",
                    "unit_count": 2,
                    "unit_level": 4,
                    "popup_type": "normal"
                },
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "unit_change",
                    "source_type": "name_source",
                    "source_value": "skeleton_warrior",
                    "unit_type": "enemy",
                    "unit_state": "unit_appear",
                    "show_hp": false,
                    "position_name": "boss_guard_04",
                    "unit_count": 1,
                    "unit_level": 4,
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "boss_buff_red",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss",
                    "unit_state": "unit_appear",
                    "trigger_count": 1
                }
            ],
            "actions": [
                {
                    "meta": "-1,0.00,30.00",
                    "action_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss",
                    "buff_name": "damage_off",
                    "buff_type": "buff_tag_protect",
                    "buff_params": "duration:-1,buff_param:red,effect_resource:buff_ball,color_red:255",
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "boss_buff_yellow",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss",
                    "unit_state": "unit_appear",
                    "trigger_count": 1
                }
            ],
            "actions": [
                {
                    "meta": "-1,10.00,30.00",
                    "action_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss",
                    "buff_name": "damage_off",
                    "buff_type": "buff_tag_protect",
                    "buff_params": "duration:-1,buff_param:yellow,effect_resource:buff_ball,color_green:255,color_red:255",
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "boss_buff_blue",
            "enabled": true,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss",
                    "unit_state": "unit_appear",
                    "trigger_count": 1
                }
            ],
            "actions": [
                {
                    "meta": "-1,20.00,30.00",
                    "action_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss",
                    "buff_name": "damage_off",
                    "buff_type": "buff_tag_protect",
                    "buff_params": "duration:-1,buff_param:blue,effect_resource:buff_ball,color_green:255,color_blue:255",
                    "popup_type": "normal"
                }
            ]
        },
        {
            "name": "win_trigger",
            "enabled": false,
            "trigger_meta": {
                "is_repeated": false,
                "trigger_relation": "then"
            },
            "triggers": [
                {
                    "trigger_type": "unit_change",
                    "source_type": "tag_source",
                    "source_value": "boss",
                    "unit_state": "unit_alive",
                    "trigger_count": 0
                }
            ],
            "actions": [
                {
                    "meta": "0,0.00,0.00",
                    "action_type": "task_change",
                    "task_name": "main_win",
                    "task_state": "task_finished"
                }
            ]
        }
    ],
    "units": [
        "dead_archer",
        "skeleton_king",
        "skeleton_warrior",
        "white_ghost"
    ],
    "tasks": [
        {
            "type": "primary_win",
            "name": "main_win",
            "desc": "kill_boss",
            "title": "kill boss"
        }
    ]
}